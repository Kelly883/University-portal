# Role-Based Access Control (RBAC) Implementation Plan

## 1. Authentication & Role Setup (Review & Refine)
*   **Current State**: `auth.config.ts` and `auth.ts` already have basic role handling. `middleware.ts` exists.
*   **Goal**: Ensure `Role` enum matches requirements (Admin, Faculty, Student) and session/JWT callbacks correctly propagate this role.
*   **Action**:
    *   Verify `Role` enum in Prisma schema (add if missing).
    *   Review `auth.config.ts` to ensure `token.role` is passed to `session.user.role`.

## 2. Middleware Protection
*   **Goal**: Protect routes based on URL patterns.
*   **Action**: Update `middleware.ts` (or `auth.config.ts`'s `authorized` callback) to strictly enforce:
    *   `/admin/*` -> Role: `ADMIN`
    *   `/faculty/*` -> Role: `FACULTY`
    *   `/student/*` -> Role: `STUDENT`
    *   `/dashboard` -> Redirect to role-specific dashboard.

## 3. Dashboard Implementation (Page Structure)
*   **Goal**: Create distinct dashboard layouts/pages for each role.
*   **Action**:
    *   Create `src/app/(dashboard)/admin/page.tsx`
    *   Create `src/app/(dashboard)/faculty/page.tsx`
    *   Create `src/app/(dashboard)/student/page.tsx`
    *   Create a root `/dashboard` page that redirects based on the user's role.

## 4. Feature Implementation Stubs
*   **Goal**: Add placeholder UI/Components for requested features to demonstrate RBAC.
*   **Student**:
    *   Courses List
    *   Grades View
    *   Fee Payment (Stub)
*   **Faculty**:
    *   Assigned Courses
    *   Student List
    *   Grade Submission Form
*   **Admin**:
    *   User Management Table
    *   Analytics Summary

## 5. Deliverables Checklist
*   [ ] `schema.prisma`: Confirm Roles.
*   [ ] `auth.config.ts`: RBAC Logic.
*   [ ] `middleware.ts`: Route Matchers.
*   [ ] Page hierarchy for `/admin`, `/faculty`, `/student`.

## Execution Steps
1.  **Schema Check**: Verify `Role` enum in `schema.prisma`.
2.  **Auth Config**: Update `authorized` callback for granular route protection.
3.  **Page Creation**: Scaffold the folder structure and pages.
4.  **Component Creation**: Add basic UI for each role's features.
5.  **Commit**: Push changes.
