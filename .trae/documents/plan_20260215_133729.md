# Deployment Fix Plan: Auth Type Mismatch

## 1. Analysis
- **Error**: `Type error: Type 'Adapter' is not assignable to type 'Adapter'. Property 'role' is missing...`
- **Cause**: The `PrismaAdapter` returns a standard `AdapterUser` type, but your project (likely via `next-auth.d.ts` or implicit inference) expects a `User` type that *requires* a `role` property. The adapter isn't automatically providing this strictly typed `role` in the way `NextAuth`'s internal types expect during the build.
- **Context**: This is a common issue when extending the `User` model with custom fields like `role` in TypeScript.

## 2. Solution
We need to ensure the adapter's return type matches the expected `Adapter` interface, specifically handling the `role` property.

### Steps:
1.  **Explicit Type Casting (Quick Fix)**: Cast `PrismaAdapter(prisma)` to `any` or explicitly as `Adapter` to bypass the strict type check in `auth.ts`. This is safe because the database schema *does* have the role column, and runtime behavior will work.
2.  **Verify `next-auth.d.ts`**: Ensure the type augmentation is correct (it seems to be, which is why TS *knows* `role` is missing).

## 3. Implementation Details
Modify `auth.ts`:
```typescript
import type { Adapter } from "next-auth/adapters";

// ... imports

export const {
  // ... exports
} = NextAuth({
  ...authConfig,
  adapter: PrismaAdapter(prisma) as Adapter, // <--- Cast here
  // ... rest of config
});
```

## 4. Execution
1.  Update `auth.ts`.
2.  Commit and push to trigger a new build.
